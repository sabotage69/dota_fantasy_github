(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{95458:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return r(8859)}])},8859:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return v}});var t=r(85893),a=r(9008),s=r.n(a),c=r(57102),i=r(67294),l=r(47568),u=r(34051),o=r.n(u),d=r(11163),m=r(14097),h=r.n(m),x=r(10682),p=r(21608),f=r(31555),j=r(2914),Z=r(51852),b=r(35005);function g(){var e=(0,i.useState)(""),n=e[0],r=e[1],a=(0,i.useState)(!1),s=a[0],c=a[1],u=(0,i.useState)(!1),m=u[0],g=u[1],v=(0,d.useRouter)().query,y=v.userName,E=v.userEmail,N=h().query,w=new(h().Client)({secret:"fnAE08dVuQAAzmq9bTtX7syJVE3CBSJwcIihlFak",domain:"db.eu.fauna.com",scheme:"https"});function _(e,n){return k.apply(this,arguments)}function k(){return(k=(0,l.Z)(o().mark((function e(n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.query(N.Let({match:N.Match(N.Index("user_by_name"),n)},N.If(N.Exists(N.Var("match")),N.Update(N.Select(["ref"],N.Get(N.Var("match"))),{data:{userEmail:r}}),null))).catch((function(e){return console.error("Error: [%s] %s: %s",e.name,e.message,e.errors()[0].description)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=(0,l.Z)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),g(!0),console.log("Updating email..."),e.prev=3,e.next=6,_(y,n);case 6:console.log("Email updated!"),c(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error during login:",e.t0),c(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(x.Z,{className:"mt-5 modal-content text-white",bg:"dark","data-bs-theme":"dark",children:[(0,t.jsx)(p.Z,{className:"mb-3",bg:"dark","data-bs-theme":"dark",children:(0,t.jsx)(f.Z,{children:(0,t.jsx)("h2",{children:"Account Information"})})}),(0,t.jsx)(p.Z,{className:"mb-3",children:(0,t.jsxs)(f.Z,{children:[(0,t.jsx)("strong",{children:"Account Name:"})," ",y]})}),(0,t.jsx)(p.Z,{className:"mb-3",children:(0,t.jsx)(f.Z,{children:(0,t.jsxs)(j.Z,{onSubmit:C,children:[(0,t.jsx)(p.Z,{className:"mb-3",children:(0,t.jsxs)(f.Z,{children:[(0,t.jsx)(j.Z.Label,{children:"Current Email:"}),(0,t.jsx)(j.Z.Control,{plaintext:!0,readOnly:!0,defaultValue:E})]})}),(0,t.jsx)(p.Z,{className:"mb-3",children:(0,t.jsxs)(f.Z,{children:[(0,t.jsx)(j.Z.Label,{children:"New Email:"}),(0,t.jsx)(j.Z.Control,{type:"email",placeholder:"example@example.com",value:n,onChange:function(e){r(e.target.value)},maxLength:"255",required:!0,title:"Please enter a valid email address",className:"form-control-lg"})]})}),m&&(0,t.jsx)(p.Z,{className:"mb-2",children:(0,t.jsx)(f.Z,{children:s?(0,t.jsx)(Z.Z,{variant:"success",children:"Email updated successfully, return to main page to see changes immediately"}):(0,t.jsx)(Z.Z,{variant:"danger",children:"Email not updated. Try again"})})}),(0,t.jsx)(b.Z,{variant:"primary",type:"submit",disabled:!n,style:{cursor:n?"pointer":"not-allowed"},children:"Update Email"})]})})})]})})}function v(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s(),{children:[(0,t.jsx)("title",{children:"Fantasy betting platform"}),(0,t.jsx)("meta",{name:"description",content:"Fantasy betting platform"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsx)(c.Z,{}),(0,t.jsx)(g,{})]})}}},function(e){e.O(0,[426,102,774,888,179],(function(){return n=95458,e(e.s=n);var n}));var n=e.O();_N_E=n}]);